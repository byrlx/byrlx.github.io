<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2016-08-19 Fri 12:37 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="viewport" content="width=device-width, initial-scale=1" />
<title>Orgmode手册4:任务功能</title>
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Luis Xu" />
<link rel="stylesheet" title="Standard" href="/style/worg.css" type="text/css" />
<link rel="alternate stylesheet" title="Zenburn" href="/style/worg-zenburn.css" type="text/css" />
<link rel="alternate stylesheet" title="Classic" href="/style/worg-classic.css" type="text/css" />
<link rel="SHORTCUT ICON" href="/org-mode-unicorn.ico" type="image/x-icon" />
<link rel="icon" href="/org-mode-unicorn.ico" type="image/ico" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="preamble" class="status">
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-7691209-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

  document.addEventListener('DOMContentLoaded',function() {
      document.getElementById("table-of-contents").onclick = function() {
          var elem = document.getElementById("text-table-of-contents");
          elem.style.display = elem.style.display == "block" ? "none" : "block";
      }
  });
</script>
</div>
<div id="content">
<h1 class="title">Orgmode手册4:任务功能</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgheadline1">创建TODO项目</a></li>
<li><a href="#orgheadline2">拓展关键字</a>
<ul>
<li><a href="#orgheadline3">设置关键字</a></li>
<li><a href="#orgheadline4">设置多组关键字</a></li>
<li><a href="#orgheadline5">使用type.</a></li>
<li><a href="#orgheadline6">在当前文件设置关键字</a></li>
<li><a href="#orgheadline7">关键字主题</a></li>
<li><a href="#orgheadline8">设置依赖</a></li>
</ul>
</li>
<li><a href="#orgheadline9">时间戳</a>
<ul>
<li><a href="#orgheadline10">设置完成时间</a></li>
<li><a href="#orgheadline11">记录状态变化</a></li>
<li><a href="#orgheadline12">追踪行为</a></li>
</ul>
</li>
<li><a href="#orgheadline13">优先级</a></li>
<li><a href="#orgheadline14">显示任务完成比</a></li>
<li><a href="#orgheadline15">附录: "TODO"快捷键</a></li>
</ul>
</div>
</div>
<p>
个人私以为, 任务功能是org mode最熠熠生辉的特性之一, 
它完美的诠释了<a href="https://zh.wikipedia.org/wiki/GTD">GTD</a> 的理念, 如果你是一个需要时间管理, 工作离不开
"任务清单"的人, org mode绝对是一个满足你需求的绝佳工具. 
</p>

<p>
下面这张图可以很直观的展示org mode的TODO特性:
</p>


<div class="figure">
<p><img src="../../../../public/img/orgmode-todo.png" alt="orgmode-todo.png" />
</p>
</div>

<p>
该图展示了一个工程的各个阶段, 通过这张图可以很直观的查看
当前工程的运行情况和完成比, 当项目为完成时, 其状态为 <b>TODO</b>, 
当其完成后, 将状态该为 <b>DONE</b>, 同时会自动修改父项目的状态, 如果
所有的子项目都完成, 父项目会自动设为 <b>DONE</b>, 否则会展示一个完成比率.
</p>

<p>
通过该图相信你已经了解了org mode的TODO的概念, 下面是具体的实现文档.
</p>

<div id="outline-container-orgheadline1" class="outline-2">
<h2 id="orgheadline1">创建TODO项目</h2>
<div class="outline-text-2" id="text-orgheadline1">
<p>
在标题的星号后面加上 <b>TODO</b> 即可将该标题设置为一个TODO任务, 也可以使用
快捷键来创建, 快捷键可以参考这篇文章 <a href="http://xuzhengchao.com/2015/12/12/org-mode-outline.html">org mode手册(1): 文档结构</a>
</p>

<p>
如果任务完成后, 可以使用 "C-c C-t" 快捷键将其设为DONE.
</p>
</div>
</div>

<div id="outline-container-orgheadline2" class="outline-2">
<h2 id="orgheadline2">拓展关键字</h2>
<div class="outline-text-2" id="text-orgheadline2">
<p>
在真实的使用场景中, 一个任务可能不仅仅只有TODO和DONE两个状态, 可能会有一些
中间状态, 或者你觉得TODO和DONE不是符合你风格的两个关键字, 针对这种情况, org mode
提供了一些功能来对TODO关键字进行扩展.
</p>
</div>
<div id="outline-container-orgheadline3" class="outline-3">
<h3 id="orgheadline3">设置关键字</h3>
<div class="outline-text-3" id="text-orgheadline3">
<p>
通过在emacs配置文件中设置 <b>org-mode-keywords</b> 来自定义TODO关键字, 如下例, 
这里设置了TODO/FEEDBACK/VERIFY和DONE/DELEGATED两组关键字,
第一组关键字处于项目的"未完成"阶段, 第二组关键字处于项目的"完成"阶段, 
通过 "|"来区分划分这两个阶段. 当使用"C-c C-t"时, 标题会轮番在这几个关键字
之间修改.
</p>
<pre class="example">
(setq org-todo-keywords
   '((sequence "TODO" "FEEDBACK" "VERIFY" "|" "DONE" "DELEGATED")))
</pre>
</div>
</div>
<div id="outline-container-orgheadline4" class="outline-3">
<h3 id="orgheadline4">设置多组关键字</h3>
<div class="outline-text-3" id="text-orgheadline4">
<p>
有时候你想将任务划分的更细, 例如状态未"TODO"的任务只能将状态改为"DONE",
状态未"BUG"的任务只能改为"FIXED"(不能设成DONE), 那么可以通过 <b>sequence</b>
关键字来实现这个功能, 如下例, 该例创建了三组关键字, 状态修改只能在本组的
关键字之间变化, 而不能跨组变化.
</p>
<pre class="example">
(setq org-todo-keywords
       '((sequence "TODO(t)" "|" "DONE(d)")
         (sequence "REPORT" "BUG" "KNOWNCAUSE" "|" "FIXED")
         (sequence "|" "CANCELED")))
</pre>
</div>
</div>
<div id="outline-container-orgheadline5" class="outline-3">
<h3 id="orgheadline5">使用type.</h3>
<div class="outline-text-3" id="text-orgheadline5">
<p>
该变量可以将TODO设置为不同的类型, 如下例, 这样可以实现将任务分配给不同的人,
分配完成后, C-c C-t修改状态时不会在这三个type之间滚动.而是直接设为done
</p>
<pre class="example">
(setq org-todo-keywords '((type "Fred" "Sara" "Lucy" "|" "DONE")))
</pre>
</div>
</div>
<div id="outline-container-orgheadline6" class="outline-3">
<h3 id="orgheadline6">在当前文件设置关键字</h3>
<div class="outline-text-3" id="text-orgheadline6">
<p>
上面几节讲到都是在全局配置文件中配置关键字, 
如果想只把配置限制在当前文件, 可以在文件开头配置相关关键字, 如下例:
</p>
<pre class="example">
#+TODO: TODO FEEDBACK VERIFY | DONE CANCELED ;; 拓展关键字

#+TYP_TODO: Fred Sara Lucy Mike | DONE ;; 设置type

;;设置多组
#+TODO: TODO | DONE
#+TODO: REPORT BUG KNOWNCAUSE | FIXED
#+TODO: | CANCELED
</pre>
</div>
</div>
<div id="outline-container-orgheadline7" class="outline-3">
<h3 id="orgheadline7">关键字主题</h3>
<div class="outline-text-3" id="text-orgheadline7">
<p>
如果嫌弃官方的关键字颜色不好看, 可以通过设置"org-todo-keyword-faces"变量可以设置不同关键字的表现形式,例如:
</p>
<pre class="example">
(setq org-todo-keyword-faces
      '(("TODO" . org-warning) ("STARTED" . "yellow")
        ("CANCELED" . (:foreground "blue" :weight bold))))
</pre>
</div>
</div>
<div id="outline-container-orgheadline8" class="outline-3">
<h3 id="orgheadline8">设置依赖</h3>
<div class="outline-text-3" id="text-orgheadline8">
<p>
有时候一个TODO可能依赖其他的TODO, 例如一个系列项目, 可能前面的项目完成
之前, 后面的项目都不能将状态改成DONE, 或者子项目完成之前, 父项目不能将
状态改成DONE.
</p>
<ol class="org-ol">
<li><p>
org-enforce-todo-dependencies.
通过设置该变量, 可以设置在所有的子标题都完成之前, 父标题不能将状态设置为DONE.
</p>
<pre class="example">
(setq org-enforce-todo-dependencies t)
</pre></li>
<li><p>
按顺序修改状态.
通过设置属性"ORDERED"来控制同级标题之前按顺序修改状态, 在前面的标题完成之前
后面的标题不能将属性设为DONE.
</p>
<pre class="example">
* Parent
  :PROPERTIES:
  :ORDERED: t
  :END:
** TODO a
** TODO b, needs to wait for (a)
** TODO c, needs to wait for (a) and (b)
</pre></li>
</ol>
</div>
</div>
</div>
<div id="outline-container-orgheadline9" class="outline-2">
<h2 id="orgheadline9">时间戳</h2>
<div class="outline-text-2" id="text-orgheadline9">
<p>
对于时间管理来说, 时间戳是必不可少的东西, 可以通过为项目设置
"排期(SCHEDULED)"或"最后期限(DEADLINE)"来更合理的规划工程. 
更详细的日期功能会在下一篇文章讲述.
</p>
</div>
<div id="outline-container-orgheadline10" class="outline-3">
<h3 id="orgheadline10">设置完成时间</h3>
<div class="outline-text-3" id="text-orgheadline10">
<p>
可以加入设置下面两个配置之一来自动在状态改成DONE的时候加入当前时间戳:
其中第二个配置还会要求你写一段完成的note.
</p>
<pre class="example">
(setq org-log-done 'time)
(setq org-log-done 'note)
</pre>
</div>
</div>
<div id="outline-container-orgheadline11" class="outline-3">
<h3 id="orgheadline11">记录状态变化</h3>
<div class="outline-text-3" id="text-orgheadline11">
<p>
下面的配置用于记录状态之间的变化, 可以通过设置带"附加属性"的keywords来实现
这一个. 在keyword后面的括号中与状态记录相关字符为:
</p>
<ul class="org-ul">
<li>"!" 表示记录时间</li>
<li>"@" 表示带时间的note</li>
<li>"/!" 当跳转到一个没有附加属性的状态时, 记录时间或note</li>
</ul>
<pre class="example">
(setq org-todo-keywords
  '((sequence "TODO(t)" "WAIT(w@/!)" "|" "DONE(d!)" "CANCELED(c@)")))
</pre>

<p>
也可以使用PROPERTIES属性 "LOGGING" 来修改某个标题的TODO附加属性, 
如果LOGGING为nil,表示没有附加记录. 也可以使用 "logrepeat" 或 
"lognotedone" 使用默认属性, 例如下例, 这个配置会修改TODO只添加时间戳,
WAIT需要note, 其他的属性使用STARTUP的默认值.
</p>
<pre class="example">
* TODO Log each state with only a time
  :PROPERTIES:
  :LOGGING: TODO(!) WAIT(@) logrepeat
  :END:
</pre>
</div>
</div>
<div id="outline-container-orgheadline12" class="outline-3">
<h3 id="orgheadline12">追踪行为</h3>
<div class="outline-text-3" id="text-orgheadline12">
<p>
使用属性STYLE habit来设置持久性行为, 如下例, 表示至少4天或至多2天
<b>刮一次胡子</b>.
</p>
<pre class="example">
** TODO Shave
 'S CHEDULEd: &lt;2015-12-08 Tue .+2d/4d&gt;
:PROPERTIES:
:STYLE:    habit
:END:
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline13" class="outline-2">
<h2 id="orgheadline13">优先级</h2>
<div class="outline-text-2" id="text-orgheadline13">
<p>
Org支持TODO项目的优先级, 默认支持的优先级有三个:A, B, C. A最高.
如下所示, 无优先级表示的项目优先级是B.
</p>
<pre class="example">
** TODO [#A]
</pre>
</div>
</div>
<div id="outline-container-orgheadline14" class="outline-2">
<h2 id="orgheadline14">显示任务完成比</h2>
<div class="outline-text-2" id="text-orgheadline14">
<p>
可以在标题中加入 "<code>[/]</code>" 或 "<code>[%]</code>" 来显示子任务的完成数.
默认只显示子标题, 如果要递归显示整个树, 需要设置
"org-hierarchical-todo-statistics", 或者在PROPERTIES中设置
"COOKIE_DATA", 如下所示;
</p>
<pre class="example">
* Parent capturing statistics [2/20]
  :PROPERTIES:
  :COOKIE_DATA: todo recursive
  :END:
</pre>

<p>
如果当子任务都完成时, 父任务自动标记为DONE, 可以在.emacs中加入
如下代码:
</p>
<pre class="example">
(defun org-summary-todo (n-done n-not-done)
  "Switch entry to DONE when all subentries are done, to TODO otherwise."
  (let (org-log-done org-log-states)   ; turn off logging
    (org-todo (if (= n-not-done 0) "DONE" "TODO"))))
(add-hook 'org-after-todo-statistics-hook 'org-summary-todo)
</pre>
</div>
</div>
<div id="outline-container-orgheadline15" class="outline-2">
<h2 id="orgheadline15">附录: "TODO"快捷键&#xa0;&#xa0;&#xa0;<span class="tag"><span class="shortkey">shortkey</span></span></h2>
<div class="outline-text-2" id="text-orgheadline15">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">C-c C-t</td>
<td class="org-left">修改项目状态</td>
</tr>

<tr>
<td class="org-left">S-right/left</td>
<td class="org-left">同上</td>
</tr>

<tr>
<td class="org-left">C-u C-c C-t</td>
<td class="org-left">选择状态</td>
</tr>

<tr>
<td class="org-left">C-c / t(T)</td>
<td class="org-left">显示todo 树</td>
</tr>

<tr>
<td class="org-left">C-c a t</td>
<td class="org-left">显示全局todo</td>
</tr>

<tr>
<td class="org-left">S-M-RET</td>
<td class="org-left">插入TODO</td>
</tr>

<tr>
<td class="org-left">C-c C-x o</td>
<td class="org-left">打开ORDERED属性</td>
</tr>

<tr>
<td class="org-left">C-u C-u C-u C-c C-t</td>
<td class="org-left">强制修改状态</td>
</tr>

<tr>
<td class="org-left">C-c ,</td>
<td class="org-left">设置优先级</td>
</tr>

<tr>
<td class="org-left">S-up/down</td>
<td class="org-left">更改优先级</td>
</tr>

<tr>
<td class="org-left">C-c #</td>
<td class="org-left">更新当前标题完成率</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="postamble">Created At <span class="timestamp-wrapper"><span class="timestamp">&lt;2015-12-13 Sun 23:25&gt;</span></span> by Luis Xu. Email: <a href="mailto:xuzhengchaojob@gmail.com">xuzhengchaojob@gmail.com</a></p>
</div>
</body>
</html>
