---
layout: post
title: Elisp基本数据结构
categories: [Lisp]
tag: [elisp]
---

<p>
对Lisp而言, 所有不是cons cell的结构都成为atom.
</p>

<div id="outline-container-orgheadline1" class="outline-2">
<h2 id="orgheadline1">Cons Cell</h2>
<div class="outline-text-2" id="text-orgheadline1">
<p>
作为一门"面向list"编程的语言, List毫无疑问是lisp最核心
的数据结构, 但List并不是一个"基本数据结构", 它是在Cons Cell
这种类型的基础上建立的. 
</p>

<p>
Cons Cell结构有两个"槽位"构成, 分别成为"CAR"槽位和"CDR"槽位.
每个槽位都可以放置任意的Lisp结构. 每个List都有一系列的Cons Cell"链接"而成.
所谓链接即List的每个cons cell, 其CDR槽位要么存放下一个cons cell, 要么
存放空list(即nil). 
</p>

<p>
以List变量 l = &gt;((pine needless) oak maple)为例来解释一下cons cell的概念, 
对于这个list来说, 它的CAR槽位可以通过(car l)来获取, 即(pine needless), 
可以看到该CAR槽位存放的对象仍然为一个list(称其为lcar), 该list同样有两个
槽位, 其CAR槽位为字符串pine. 
</p>

<p>
List 的CDR槽位可以通过(cdr list)来获取, 以上面的l为例, 其CDR槽位为(oak maple),
同样为一个list对象(称其为lcdr). 对于lcdr, 其CDR槽位为(maple), 仍然为一个list
(称其为llcdr), llcdr的CAR槽位为maple, CDR槽位为nil.
可以通过下图来展示上面的例子
</p>
<pre class="example">
 --------------       --------------       --------------
| car   | cdr  |     | car   | cdr  |     | car   | cdr  |
|   o   |   o-------&gt;| oak   |   o-------&gt;| maple |  nil |
|   |   |      |     |       |      |     |       |      |
 -- | ---------       --------------       --------------
    |
    |
    |        --------------       ----------------
    |       | car   | cdr  |     | car     | cdr  |
     ------&gt;| pine  |   o-------&gt;| needles |  nil |
            |       |      |     |         |      |
             --------------       ----------------
</pre>

<p>
一个cons cell可以用下面的方式表示 (A . B). 这里该cons cell的CAR槽位为A,
CDR槽位为B, 对于上面的list l, 其完整的表示为. 不过在lisp编码中一般
使用上面例子的形式, 除非需要明确指定CDR槽为一个既不为cons cell, 又不为nil的
对象.
</p>
<pre class="example">
((pine . (needless . nil)) . (oak . (maple . nil))))
</pre>
</div>
</div>

<div id="outline-container-orgheadline2" class="outline-2">
<h2 id="orgheadline2">数组</h2>
<div class="outline-text-2" id="text-orgheadline2">
<p>
在Emacs Lisp, 数组是指一个固定长度的对象, 里面的每一个元素都占据
该数组的一个"槽位".  Emacs中的数组可分为四种类型: Vector, String, 
Char-table, Bool-vector. 对这四种类型的操作可以使用通用的数组函数.
</p>
</div>
<div id="outline-container-orgheadline3" class="outline-3">
<h3 id="orgheadline3">通用数组函数</h3>
<div class="outline-text-3" id="text-orgheadline3">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">原型</th>
<th scope="col" class="org-left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">(arrayp x)</td>
<td class="org-left">如果x是数组返回t</td>
</tr>

<tr>
<td class="org-left">(aref a index)</td>
<td class="org-left">返回第index个元素, 0开始</td>
</tr>

<tr>
<td class="org-left">(aset a index obj)</td>
<td class="org-left">将第index元素设为obj, 返回obj</td>
</tr>

<tr>
<td class="org-left">(fillarray a obj)</td>
<td class="org-left">全部设为obj</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orgheadline4" class="outline-3">
<h3 id="orgheadline4">向量(Vector)</h3>
<div class="outline-text-3" id="text-orgheadline4">
<p>
在Emacs lisp中,向量通过中括号表示, 里面包含任意类型的对象. 
例如 [1 "two" (three)]. 下表是vector特有的函数:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">原型</th>
<th scope="col" class="org-left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">(vectorp v)</td>
<td class="org-left">检查是否为vector</td>
</tr>

<tr>
<td class="org-left">(vector ..)</td>
<td class="org-left">生成vector</td>
</tr>

<tr>
<td class="org-left">(make-vector N obj</td>
<td class="org-left">生成N个obj的vector</td>
</tr>

<tr>
<td class="org-left">(vconcat x y z &#x2026;)</td>
<td class="org-left">将所有参数的元素组合成一个vector</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
